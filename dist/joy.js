!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("joy",[],e):"object"==typeof exports?exports.joy=e():t.joy=e()}(self,(()=>(()=>{"use strict";var t={d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{circle:()=>d,ellipse:()=>g,line:()=>m,map:()=>f,point:()=>x,rectangle:()=>w,repeat:()=>O,rotate:()=>j,scale:()=>v,translate:()=>b});class r{constructor(t,e,r={},n=[],s=[]){this.tag=t,this.attrs=e,this.kwargs=r,this.transform=[],this.children=n,this.repeatChildren=s}clone(t={}){return new r(this.tag,this.attrs,t,[...this.children])}add(t){return this.children.push(t),this}toString(){return`<${this.tag} ${this.attrs}>`}translate({x:t=0,y:e=0}){let r=new c(t,e);return this.transform.push(r),this}rotate({angle:t=0}){let e=new l(t);return this.transform.push(e),this}scale({x:t=1,y:e=1}){let r=new u(t,e);return this.transform.push(r),this}repeat({n:t,transform:e}){let r=this.clone();return Array(t).fill(0).forEach(((t,n)=>{let s,i={};if("function"==typeof e){const t=e(n);t instanceof h||Array.isArray(t)?(s=t,i=this.kwargs):(s=t.transform,i=t.style||{})}else s=e,i=this.kwargs;let o=e instanceof h&&s instanceof h?new y(n+1,s):s;if(Array.isArray(o))for(let t=0;t<o.length;t++){let e=r.clone(i);e.transform.push(o[t]),this.children.push(e)}else{let t=r.clone(i);t.transform=[o],this.children.push(t)}})),this}}class n extends r{constructor(t=0,e=0,r={}){super("point",{x:t,y:e}),this.x=t,this.y=e}equals(t){return t instanceof n&&t.x===this.x&&t.y===this.y}toString(){return`Point(${this.x}, ${this.y})`}}class s extends r{constructor(t=new n(0,0),e=100,r={}){super("circle",{cx:t.x,cy:t.y,d:2*e},r),this.center=t,this.radius=e}}class i extends r{constructor(t=new n(0,0),e=200,r=100,s={}){super("ellipse",{x:t.x,y:t.y,width:e,height:r,d:50},s),this.center=t,this.width=e,this.height=r}}class o extends r{constructor(t=new n(0,0),e=200,r=100,s={}){super("rect",{x:t.x,y:t.y,width:e,height:r},s),this.center=t,this.width=e,this.height=r}}class a extends r{constructor(t=new n(-100,0),e=new n(100,0),r={}){super("line",{x1:t.x,y1:t.y,x2:e.x,y2:e.y}),this.start=t,this.end=e}}class h{constructor(t,e,r=[]){this.tag=t,this.attrs=e,this.children=r}translate({x:t=0,y:e=0}){let r=new c(t,e);return this.children.push(r),this}rotate({angle:t=0}){let e=new l(t);return this.children.push(e),this}scale({x:t=1,y:e=1}){let r=new u(t,e);return this.children.push(r),this}repeat({n:t,transform:e}){let r=O({n:t,transform:e});return r instanceof h?this.children.push(r):this.children.push(...r),this}}class c extends h{constructor(t=0,e=0){super("translate",{x:t,y:e}),this.x=t,this.y=e}}class l extends h{constructor(t=0){super("rotate",{angle:-t}),this.angle=-t}}class u extends h{constructor(t=1,e=1){super("scale",{x:t,y:e}),this.x=t,this.y=e}}class y extends h{constructor(t,e){let r=[];for(let n=0;n<t-1;n++)r=r.concat([e,...e.children]);super(e.tag,e.attrs,r)}}function f(t,e,r,n,s,i=!1){const o=n+(t-e)*(s-n)/(r-e);return i?n<s?Math.min(Math.max(o,n),s):Math.min(Math.max(o,s),n):o}var p=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]])}return r};function x(t={}){var{x:e=0,y:r=0}=t,s=p(t,["x","y"]);return new n(e,r,s)}function d(t={}){var{x:e=0,y:r=0,r:i=100}=t,o=p(t,["x","y","r"]);return new s(new n(e,r),i,o)}function w(t={}){var{x:e=0,y:r=0,w:s=200,h:i=100}=t,a=p(t,["x","y","w","h"]);return new o(new n(e,r),s,i,a)}function g(t={}){var{x:e=0,y:r=0,w:s=200,h:o=100}=t,a=p(t,["x","y","w","h"]);return new i(new n(e,r),s,o,a)}function m(t={}){var{x1:e=-100,y1:r=0,x2:s=100,y2:i=0,l:o}=t,h=p(t,["x1","y1","x2","y2","l"]);return void 0!==o?new a(new n(-o/2,0),new n(o/2,0),h):new a(new n(e,r),new n(s,i),h)}function b({x:t=0,y:e=0}={x:0,y:0}){return new c(t,e)}function j({angle:t=0}={angle:0}){return new l(t)}function v({x:t=1,y:e=1}={x:1,y:1}){return new u(t,e)}function O({n:t,transform:e}){return Array(t).fill(0).map(((t,r)=>{let n;return n="function"==typeof e?e(r):e,e instanceof h?new y(r+1,n):n}))}return e})()));